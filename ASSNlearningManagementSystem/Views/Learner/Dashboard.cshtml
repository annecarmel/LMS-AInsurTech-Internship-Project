@model ASSNlearningManagementSystem.Models.ViewLearnerModel

@{
    Layout = "_Layout";
    ViewData["Title"] = "Dashboard";
}

<head>
    <link rel="stylesheet" href="~/css/style.css" />
    <link rel="stylesheet" href="~/css/responsive.css" />
</head>

<main>
    <div class="container">
        <div class="dashboard-contents">

            <!-- Small Cards Section -->
            <div class="hero_section">
                <div class="number_card">
                    <div class="card1">
                        <div class="card1_left">
                            <img src="~/img/Policies.png" alt="Policies Icon" />
                        </div>
                        <div class="card1_right">
                            <h6>Courses Enrolled</h6>
                            <h1>@Model.Enrollments?.Count()</h1>
                        </div>
                    </div>
                    <div class="card2">
                        <div class="card2_left">
                            <img src="~/img/Claims.png" alt="Claims Icon" />
                        </div>
                        <div class="card2_right">
                            <h6>Total Courses</h6>
                            <h1>@Model.Courses?.Count()</h1>
                        </div>
                    </div>
                    <div class="card3">
                        <div class="card3_left">
                            <img src="~/img/Settlement.png" alt="Rating Icon" />
                        </div>
                        <div class="card3_right">
                            <h6>Rate your Learning</h6>
                            <h1></h1> <!-- Placeholder -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Charts Section -->
            <div class="table_card" style="display: flex; flex-wrap: wrap; gap: 20px;">
                <div class="motor_card_box" style="flex: 1 1 48%;">
                    <div class="details">
                        <div class="details-header">
                            <h3>Your Course Progress</h3>
                        </div>
                        <div class="chart-container" style="width:100%; height:400px;">
                            <canvas id="barChart"></canvas>
                        </div>
                    </div>
                </div>

                <div class="motor_card_box" style="flex: 1 1 48%;">
                    <div class="details">
                        <div class="details-header">
                            <h3>Courses</h3>
                        </div>
                        <div class="chart-container" style="width:100%; height:400px;">
                            <canvas id="pieChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Tables Section -->
            <div class="table_card" style="display: flex; flex-wrap: wrap; gap: 20px; margin-top: 20px;">

                <!-- Enrollment Table -->
                <div class="motor_card_box" style="flex: 1 1 48%;">
                    <div class="details">
                        <div class="details-header">
                            <h3>Your Course Enrollments</h3>
                        </div>
                        <div class="table-responsive">
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>Course ID</th>
                                        <th>Completion Status</th>
                                        <th>Enrolled On</th>
                                        <th>Completed On</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @foreach (var e in Model.Enrollments)
                                    {
                                        <tr>
                                            <td>@e.CourseId</td>
                                            <td>In Progress</td> <!-- Replace with actual status when available -->
                                            <td>@e.EnrolledOn.ToString("yyyy-MM-dd")</td>
                                            <td>@(e.CompletedOn?.ToString("yyyy-MM-dd") ?? "N/A")</td>
                                        </tr>
                                    }
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Courses Table -->
                <div class="motor_card_box" style="flex: 1 1 48%;">
                    <div class="details">
                        <div class="details-header">
                            <h3>Courses Available</h3>
                        </div>
                        <div class="table-responsive">
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>Course ID</th>
                                        <th>Course Name</th>
                                        <th>Description</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @foreach (var c in Model.Courses)
                                    {
                                        <tr>
                                            <td>@c.CourseId</td>
                                            <td>@c.CourseName</td>
                                            <td>@c.Description</td>
                                        </tr>
                                    }
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

            </div>

        </div>
    </div>
</main>
