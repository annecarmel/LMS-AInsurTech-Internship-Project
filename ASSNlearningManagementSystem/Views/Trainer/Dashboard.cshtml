@{
    Layout = "_TrainerLayout";
    ViewData["Title"] = "Dashboard";
}
<!DOCTYPE html>
<html>
<head>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/responsive.css">
    <title>DashBoard</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>
</head>

<body>
    <main>
        <div class="container">
            <div class="dashboard-contents">
                <div class="hero_section">
                    <div class="number_card">
                        <div class="card1">
                            <div class="card1_left">
                                <img src="~/img/Policies.png" />
                            </div>
                            <div class="card1_right">
                                <h6> Number of Learners</h6>
                                <h1>@Model.TotalLearners</h1>
                            </div>
                        </div>

                        <div class="card2">
                            <div class="card2_left">
                                <img src="~/img/Claims.png" />
                            </div>
                            <div class="card2_right">
                                <h6>Assigned Courses</h6>
                                <h1>@Model.AssignedCourses</h1>
                            </div>
                        </div>

                        <div class="card3">
                            <div class="card3_left">
                                <img src="~/img/Settlement.png" />
                            </div>
                            <div class="card3_right">
                                <h6>Number of Courses</h6>
                                <h1>@Model.TotalCourses</h1>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="policy_card">
                    <div class="motor_card_box">
                        <div class="motor_text">
                            <h4>Course Enrollment</h4>
                            <!--<h3>Python Programming</h3>
                            <ul class="left-align">
                                
                                <li><div class="enrollment-info"><span class="label">Course Code:</span> <span class="value">PY101</span></div></li>
                                <li><div class="enrollment-info"><span class="label">Student Name:</span> <span class="value">John Doe</span></div></li>
                                <li><div class="enrollment-info"><span class="label">Email:</span> <span class="value">john@example.com</span></div></li>
                                <li><div class="enrollment-info"><span class="label">Enrolled On:</span> <span class="value">June 10, 2025</span></div></li>
                                <li><div class="enrollment-info"><span class="label">Progress:</span> <span class="value">45%</span></div></li>
                            </ul>-->
                        </div>
                    </div>

                    <div class="motor_card_box">
                        <h2 style="font-weight: bold; font-size: 20px;">Course</h2>
                    </div>
                    <br />

                    <div class="table_card">
                        <!-- First Motor Card Box -->
                        <div class="motor_card_box">
                            <div class="details">
                                <div class="details-header">
                                    <h6>Session Schedule</h6>
                                </div>
                                <div class="table-responsive">
                                    <table class="table" id="table1">
                                        <thead>
                                            <tr>
                                                <th>Edit</th>
                                                <th>Session ID</th>
                                                <th>Topic</th>
                                                <th>Date</th>
                                                <th>Learner</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            @foreach (var s in Model.Sessions)
                                            {
                                                <tr>
                                                    <td>
                                                        <a href="#" class="edit-icon">
                                                            <img src="~/img/edit Icon.png" width="15px" height="15px" />
                                                        </a>
                                                    </td>
                                                    <td>@s.SessionId</td>
                                                    <td>@s.Topic</td>
                                                    <td>@s.Date.ToString("yyyy-MM-dd")</td> <!-- optional: format date -->
                                                    <td>@s.LearnerName</td>
                                                </tr>
                                            }
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>


                        <!-- Second Motor Card Box -->
                        <div class="motor_card_box">
                            <div class="details">
                                <div class="details-header">
                                    <h6>Evaluation</h6>
                                </div>
                                <div class="table-responsive">
                                    <table class="table" id="table2">
                                        <thead>
                                            <tr>
                                                <th>Edit</th>
                                                <th>Exam ID</th>
                                                <th>Exam Name</th>
                                                <th>Learner</th>
                                                <th>Status</th>
                                            </tr>
                                        </thead>
                                        @foreach (var e in Model.Evaluations)
                                        {
                                            <tr>
                                                <td>
                                                    <a href="#" class="edit-icon">
                                                        <img src="~/img/edit Icon.png" width="15px" height="15px" />
                                                    </a>
                                                </td>
                                                <td>@e.ExamId</td>
                                                <td>@e.ExamName</td>
                                                <td>@e.LearnerName</td>
                                                <td>@e.Status</td>
                                            </tr>
                                        }
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div> <!-- End of table_card -->
                </div> <!-- End of policy_card -->
            </div> <!-- End of dashboard-contents -->
        </div> <!-- End of container -->
    </main>

    <div id="edit-modal" class="modal">
        <h2>Edit Policy Details</h2>
        <form>
            <label>Quotation:</label>
            <input type="text" id="quotation" name="quotation" />

            <label>Policy Issue:</label>
            <input type="date" id="policyIssue" name="policyIssue" />

            <label>Policy End:</label>
            <input type="date" id="policyEnd" name="policyEnd" />

            <label>Status:</label>
            <input type="text" id="status" name="status" />

            <button type="submit" class="submit-button">Submit</button>
            <button type="button" id="cancel-button">Cancel</button>
        </form>
    </div>

    <script>
        let selectedRow = null;

        document.querySelectorAll('.edit-icon').forEach(icon => {
            icon.addEventListener('click', function () {
                selectedRow = this.closest('tr');
                const cells = selectedRow.querySelectorAll('td');

                document.getElementById('quotation').value = cells[1].innerText;
                document.getElementById('policyIssue').value = cells[2].innerText;
                document.getElementById('policyEnd').value = cells[3].innerText;
                document.getElementById('status').value = cells[4].innerText;

                document.getElementById('edit-modal').style.display = 'block';
            });
        });

        document.querySelector('.submit-button').addEventListener('click', function () {
            if (selectedRow) {
                const cells = selectedRow.querySelectorAll('td');
                cells[1].innerText = document.getElementById('quotation').value;
                cells[2].innerText = document.getElementById('policyIssue').value;
                cells[3].innerText = document.getElementById('policyEnd').value;
                cells[4].innerText = document.getElementById('status').value;
            }
            document.getElementById('edit-modal').style.display = 'none';
        });

        document.getElementById('cancel-button').addEventListener('click', function () {
            document.getElementById('edit-modal').style.display = 'none';
        });
    </script>
</body>
</html>
